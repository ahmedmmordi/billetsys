<!--
  Eclipse Public License - v 2.0

    THE ACCOMPANYING PROGRAM IS PROVIDED UNDER THE TERMS OF THIS ECLIPSE
    PUBLIC LICENSE ("AGREEMENT"). ANY USE, REPRODUCTION OR DISTRIBUTION
    OF THE PROGRAM CONSTITUTES RECIPIENT'S ACCEPTANCE OF THIS AGREEMENT.
-->

{#include layout}
{#content}
<h1>{title}</h1>
<form method="post" action="{action}" enctype="multipart/form-data">
    <div>
        <label class="markdown-label" for="message-body">Body</label>
        <div class="markdown-editor" data-markdown-editor>
            <div class="markdown-toolbar" data-md-toolbar>
                <button type="button" data-md-action="bold" aria-label="Bold"><strong>B</strong></button>
                <button type="button" data-md-action="italic" aria-label="Italic"><em>I</em></button>
                <button type="button" data-md-action="heading" aria-label="Heading">H</button>
                <button type="button" data-md-action="list" aria-label="List">List</button>
                <button type="button" data-md-action="quote" aria-label="Quote">Quote</button>
                <button type="button" data-md-action="code" aria-label="Code"><code>{}</code></button>
                <button type="button" data-md-action="code-block" aria-label="Code block">Code</button>
                <button type="button" data-md-action="link" aria-label="Link">Link</button>
            </div>
            <div class="markdown-panels">
                <div class="markdown-panel">
                    <div class="markdown-panel-header">Write</div>
                    <textarea id="message-body" name="body" rows="6" required data-md-input>{message.body}</textarea>
                </div>
                <div class="markdown-panel">
                    <div class="markdown-panel-header">Preview</div>
                    <div class="markdown-preview" data-md-preview></div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <label>Date
            <input type="datetime-local" name="date" value="{dateValue}" required>
        </label>
    </div>
    <div>
        <label>Ticket
            <select name="ticketId" required>
                <option value="">Select a ticket</option>
                {#for ticket in tickets}
                <option value="{ticket.id}" {#if message.ticket != null && message.ticket.id == ticket.id}selected{/if}>{ticket.name}</option>
                {/for}
            </select>
        </label>
    </div>
    <div data-attachment-container>
        <span class="attachment-label">Attachments</span>
        <div class="attachment-list" data-attachment-list>
            <table>
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Mimetype</th>
                    <th>Size</th>
                    <th></th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <input type="file" name="attachments" multiple data-attachment-input class="attachment-input">
        <div class="attachment-actions">
            <button type="button" class="action-button" data-attachment-trigger>Browse</button>
        </div>
    </div>
    <button type="submit">Save</button>
</form>
<p><a href="/messages">Back to list</a></p>
{/content}
{/include}
